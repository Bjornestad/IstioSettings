# MMMMMMMMMMMMMM>!!!>!!!>>>>>>!!!>!!!>MMMMMMMMMMMMMM
# MMMMMMMMMMMM>!>!!!>>>>>>>>>>>>>>!!!>!>MMMMMMMMMMMM
# MMMMMMMMMMM!!!!!>>>>>>>>>>>>>>>>>>!!!!!MMMMMMMMMMM
# MMMMMMMMM>>>!!>>>>>>>>>>>>>>>>>>>>>>!!>>>MMMMMMMMM
# MMMMMMMM>>>!>>>>>>>>>>>>>>>>>>>>>>>>>>!>>>MMMMMMMM
# MMMMMMM>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MMMMMMM
# MMMMMM>>!>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>!>>MMMMMM
# MMMMM>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MMMMM
# MMMM?>!>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>!>?MMMM
# MMM:7>>>>>>>>>>>>>>>>>>>>>>>>C>>>>>>>>?7>>>>>7:MMM
# MMM:!>>>>>>>>>>>>>>C7>>>>>>>>O?>>>>>>>?O7$>>>!:MMM
# MM:!!>>>>>>>>>>>>>>$7>>>>>>>>QC>>>>>>>7$?O>>>!!:MM
# M>!>>>>>>>>>>>>>>>?$>>>>>>>>>$$>>>>>>>7$?O>>>>>!>M
# M!!>>>>>>>>>>>>7?OQC>>>>>>>>>7$Q?7>>>>>$OC>>>>>!!M
# M>!>>>>>>>>>>C$QQQQ?>>>>7?>>>>CQQQ$C7>>C$>>>>>>!>M
# >>!>>>>>>7C$QQQ$QQQQ7>>>OQ7>>OQ$$QQQQQO?7>>>>>>!>>
# >!>>>>7O$QQQO?O7OQOQO>>>$QC>>?!$?OO?$OQQQ$OC7>>>!>
# >!>>C$QQ$$$>;;$C777$O>>>QQ$>>!;OO??$?;;:CQ$$O>>>!>
# >!>>77>>>$:...!$OO$?–>>>$O$>>>;;?OO7;...;C?>>>>>!>
# !>>>>>>>C7.....–7?!;;>>>>>>>>>>..........:$>>>>>>!
# >>>>>>>>$–..........–7>>CO>>>>O:;–:::!!:::$>>>>>>>
# >>>>>>>>Q–.........;??>7QC>>>>?$$QQQQQQQQQQ7>>>>>>
# !>>>>>>7Q–......;–7OO>>CQ7>>>>>$QQQQQQQQQQQ7>>>>>!
# >>>>>>>>Q!....;!OQQ?>>>>?>>>>>>7$QQQQQQQQQQ>>>>>>>
# >7>?>>>?QQC???$QQ$7>>>>>>>>>>>>>7QQQQQQQQQQ7>>>>>>
# >7OO>>>7QQQQQQQQQ7>>>>>>>>>>>>>>>7?C$QQQQQO>>>>>>>
# >>$O7>>>C$$$QOOO7>>>>>>COO$$$?>>>>>77?OC7?7>>>>>>>
# !>$C?>>>>77777777>>>>7$7!!––!$7>>>>77777777>>>>>>!
# >>CQ7>>>>>777777>>>>7O:......>$>>>>>7777777>>>>>>>
# >>>>>>>>>>>7777>>>>>O–..;;;..;OC>>>>>77777>>>>>>>!
# !>>>>>>>>>>>>>>>>>>O:;>CO$O?!;:$>>>>>>>>>>>>>>>>>!
# !!>>>>>>>>>>>>>>>>7$;7QQQQQQQ7;Q7>>>>>>>>>>>>>>>!!
# >!>>>>>>>>>>>>>>>>OQ7$QQQQQQQC!QC>>>>>>>>>>>>>>>>>
# >!>>>>>>>>>>>>>>>>QQQQQQQQQQQQQQO>>>>>>>>>>>>>>>!>
# >>>>>>>>>>>>>>>>>7QQQQQQQQQQQQQQ$>>>>>>>>>>>>>>>!>
# M>>>>>>>>>>>>>>>>>QQQ$OCCQO?7C$Q$>>>>>>>>>>>>>>>>M
# M7>>>>>>>>>>>>>>>>QQO7777$77777O$>>>>>>>>>>>>>>>7M
# M$7!>>>>>>>>>>>>>>O$77777?77777OC>>>>>>>>>>>>>!7$M
# MM>>!>>>>>>>>>>>>>7Q?777777777$Q>>>>>>>>>>>>>!>>MM
# MMM!!>>>>>>>>>>>>>>7QC7777777O$7>>>>>>>>>>>>>!!MMM
# MMM>>>>>>>>>>>>>>>>>?Q?77777?Q?>>>>>>>>>>>>>!>>MMM
# MMMM>>>>>>>>>>>>>>>7$Q$77777$QO>>>>>>>>>>>>>>>MMMM
# MMMMM>>>>>>>>>>>>>>>>?$$?7?$Q7>>>>>>>>>>>>>>>MMMMM
# MMMMMM>!>>>>>>>>>>>>>>>OQQQO7>>>>>>>>>>>>>!>MMMMMM
# MMMMMMM>>>>>>>>>>>>>>>>>>7>>>>>>>>>>>>>>>>>MMMMMMM
# MMMMMMMM>>>!>>>>>>>>>>>>>>>>>>>>>>>>>>!>>>MMMMMMMM
# MMMMMMMMM>!!!!>>>>>>>>>>>>>>>>>>>>>>!!!!>MMMMMMMMM
# MMMMMMMMMMM!!>!!>>>>>>>>>>>>>>>>>>!!>!!MMMMMMMMMMM
# MMMMMMMMMMMM>!!!>!!>>>>>>>>>>>>!!>!!!>MMMMMMMMMMMM
# MMMMMMMMMMMMMMM!>!>!!!!>>>>!!!!>!>!MMMMMMMMMMMMMMM

# no one has moved to new namespaces yet, so ports 
# are all from the old namespaces, check if this
# needs to be changed once stuff actually goes
# live. Kept namespaces in, which dont need to
# communicate with other groups/dont need to have
# anything on their namespace

--- #####################################
#Peer auth for grp 1 ux
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: ux-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: media-acquisition-prod-service-entry
  namespace: ux-prod
spec:
  hosts:
  - "*.media-acquisition-prod.svc.cluster.local"
  ports:
  - number: 27017
    name: tcp-27017
    procotol: TCP
  - number: 30231
    name: tcp-30231
    protocol: TCP
  resolution: DNS
  - number: 5050
    name: tcp-5050
    procotol: TCP
  resolution: DNS
  - number: 30952
    name: tcp-30952
    procotol: TCP
  resolution: DNS
--- #####################################
#Peer auth for grp 2 web design
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: webdesign-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry ux
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: ux-service-entry-wb
  namespace: webdesign-prod
spec:
  hosts:
  - "*.ux-prod.svc.cluster.local"
  ports:
  - number: 8080
    name: tcp-8080
    procotol: TCP
  resolution: DNS
---
#Service entry media-player
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: mediaplayer-service-entry-wb
  namespace: webdesign-prod
spec:
  hosts:
  - "*.mediaplayer-prod.svc.cluster.local"
  ports:
  - number: 8090
    name: tcp-8090
    procotol: TCP
  resolution: DNS
---
#Service entry media-aq
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: media-acquisition-service-entry-wb
  namespace: webdesign-prod
spec:
  hosts:
  - "*.media-acquisition-prod.svc.cluster.local"
  ports:
  - number: 27017
    name: tcp-27017
    procotol: TCP
  - number: 30231
    name: tcp-30231
    protocol: TCP
  resolution: DNS
  - number: 5050
    name: tcp-5050
    procotol: TCP
  resolution: DNS
  - number: 30952
    name: tcp-30952
    procotol: TCP
  resolution: DNS
---
#Service entry data search
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: data-search-service-entry-wb
  namespace: webdesign-prod
spec:
  hosts:
  - "*.datasearch-prod.svc.cluster.local"
  ports:
  - number: 8080
    name: tcp-8080
    procotol: TCP
  - number: 31311
    name: tcp-31311
    procotol: TCP
  resolution: DNS
---
#Service entry subscription
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: subscription-service-entry-wb
  namespace: webdesign-prod
spec:
  hosts:
  - "*.subscription-prod.svc.cluster.local"
  ports:
  - number: 80
    name: tcp-80
    procotol: TCP
  resolution: DNS
--- #####################################
#Peer auth for grp 3 connection
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: connectionsecurity-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry

# apiVersion: networking.istio.io/v1alpha3
# kind: ServiceEntry
# metadata:
#   name: connectionsecurity-service-entry
#   namespace: 
# spec:
#   hosts:
#   - "til.svc.cluster.local"
#   ports:
#   - number: #tilPort
#     name: #networkType
#     procotol: TCP
#   resolution: DNS

--- #####################################
#Peer auth for grp 4 data search
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: datasearch-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: media-acquisition-service-entry-ds
  namespace: datasearch-prod
spec:
  hosts:
  - "*.media-acquisition-prod.svc.cluster.local"
  ports:
  - number: 27017
    name: tcp-27017
    procotol: TCP
  - number: 30231
    name: tcp-30231
    procotol: TCP
  resolution: DNS
  - number: 5050
    name: tcp-5050
    procotol: TCP
  resolution: DNS
  - number: 30952
    name: tcp-30952
    procotol: TCP
  resolution: DNS
--- #####################################
#Peer auth for grp 5 media acquisition
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: mediaacquisition-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry

# apiVersion: networking.istio.io/v1alpha3
# kind: ServiceEntry
# metadata:
#   name: 
#   namespace: #til
# spec:
#   hosts:
#   - "til.svc.cluster.local"
#   ports:
#   - number: #tilPort
#     name: #networkType
#     procotol: TCP
#   resolution: DNS

--- #####################################
#Peer auth for grp 6 media player
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: mediaplayer-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: media-acquisition-service-entry-mp
  namespace: mediaplayer-prod
spec:
  hosts:
  - "*.media-acquisition-prod.svc.cluster.local"
  ports:
  - number: 27017
    name: tcp-27017
    procotol: TCP
  - number: 30231
    name: tcp-30231
    procotol: TCP
  resolution: DNS
  - number: 5050
    name: tcp-5050
    procotol: TCP
  resolution: DNS
  - number: 30952
    name: tcp-30952
    procotol: TCP
  resolution: DNS
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: ux-service-entry-mp
  namespace: mediaplayer-prod
spec:
  hosts:
  - "*.ux-prod.svc.cluster.local"
  ports:
  - number: 8080
    name: tcp-8080
    procotol: TCP
  resolution: DNS
--- #####################################
#Peer auth for grp 7 CI
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: ci-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry

# apiVersion: networking.istio.io/v1alpha3
# kind: ServiceEntry
# metadata:
#   name: #fra
#   namespace: #til
# spec:
#   hosts:
#   - "til.svc.cluster.local"
#   ports:
#   - number: #tilPort
#     name: #networkType
#     procotol: TCP
#   resolution: DNS

--- #####################################
#Peer auth for grp 8 operations
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: team8
spec:
  mtls:
    mode: STRICT
---
#Service entry

# apiVersion: networking.istio.io/v1alpha3
# kind: ServiceEntry
# metadata:
#   name: #fra
#   namespace: #til
# spec:
#   hosts:
#   - "til.svc.cluster.local"
#   ports:
#   - number: #tilPort
#     name: #networkType
#     procotol: TCP
#   resolution: DNS

--- #####################################
#Peer auth for grp 9 subscription
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: subscription-prod
spec:
  mtls:
    mode: STRICT
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: media-acqquisition-service-entry-sub
  namespace: subscription-prod
spec:
  hosts:
  - "*.media-acquisition-prod.svc.cluster.local"
  ports:
  - number: 27017
    name: tcp-27017
    procotol: TCP
  - number: 30231
    name: tcp-30231
    procotol: TCP
  resolution: DNS
  - number: 5050
    name: tcp-5050
    procotol: TCP
  resolution: DNS
  - number: 30952
    name: tcp-30952
    procotol: TCP
  resolution: DNS
---
#Service entry
apiVersion: networking.istio.io/v1alpha3
kind: ServiceEntry
metadata:
  name: connection-security-service-entry-mp
  namespace: subscription-prod
spec:
  hosts:
  - "*.connectionsecurity-prod.svc.cluster.local"
  ports:
  - number: 6379
    name: tcp-6379
    procotol: TCP
  resolution: DNS
  - number: 26379
    name: tcp-26379
    procotol: TCP
  resolution: DNS
  - number: 8000
    name: tcp-8000
    procotol: TCP
  resolution: DNS
  - number: 30421
    name: tcp-30421
    procotol: TCP
  resolution: DNS
--- #####################################

